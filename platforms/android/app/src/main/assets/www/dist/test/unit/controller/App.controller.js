sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/core/mvc/Controller","sap/ui/demo/todo/controller/App.controller","sap/ui/model/json/JSONModel"],function(t,e,o,i){"use strict";QUnit.module("Test model modification",{beforeEach:function(){this.oAppController=new o;this.oViewStub=new t({});sinon.stub(e.prototype,"getView").returns(this.oViewStub);this.oJSONModelStub=new i({todos:[]});this.oViewStub.setModel(this.oJSONModelStub)},afterEach:function(){e.prototype.getView.restore();this.oViewStub.destroy()}});QUnit.test("Should add a todo element to the model",function(t){t.strictEqual(this.oJSONModelStub.getObject("/todos").length,0,"There must be no todos defined.");this.oJSONModelStub.setProperty("/newTodo","new todo item");this.oAppController.addTodo();t.strictEqual(this.oJSONModelStub.getObject("/todos").length,1,"There is one new item.")});QUnit.test("Should toggle the completed items in the model",function(t){var e={todos:[{title:"Start this app",completed:false}],itemsLeftCount:1};this.oJSONModelStub.setData(e);t.strictEqual(this.oJSONModelStub.getObject("/todos").length,1,"There is one item.");t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),1,"There is one item left.");this.oJSONModelStub.setProperty("/todos/0/completed",true);this.oAppController.updateItemsLeftCount();t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),0,"There is no item left.")});QUnit.test("Should clear the completed items",function(t){var e={todos:[{title:"Start this app1",completed:false},{title:"Start this app2",completed:true}],itemsLeftCount:1};this.oJSONModelStub.setData(e);t.strictEqual(this.oJSONModelStub.getObject("/todos").length,2,"There are two items.");t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),1,"There is no item left.");this.oAppController.clearCompleted();this.oAppController.updateItemsLeftCount();t.strictEqual(this.oJSONModelStub.getObject("/todos").length,1,"There is one item left.");t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),1,"There is one item left.")});QUnit.test("Should update items left count when no todos are loaded, yet",function(t){var e={};this.oJSONModelStub.setData(e);t.strictEqual(this.oJSONModelStub.getObject("/todos"),undefined,"There are no items.");t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),undefined,"Items left is not set");this.oAppController.updateItemsLeftCount();t.strictEqual(this.oJSONModelStub.getProperty("/itemsLeftCount"),0,"There is no item left.")})});